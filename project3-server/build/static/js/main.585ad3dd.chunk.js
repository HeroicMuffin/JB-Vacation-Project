(this["webpackJsonpproject3-client"]=this["webpackJsonpproject3-client"]||[]).push([[0],{128:function(e,t,a){e.exports=a(171)},133:function(e,t,a){},158:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),l=a.n(c),o=(a(133),a(50)),i=a(44),s=(a(134),a(19)),u=Object(s.b)((function(e,t){return{isAdmin:e.isAdmin}}),null)((function(e){var t=e.routes.map((function(e,t){return r.a.createElement(i.b,Object.assign({},e,{key:t}))}));return r.a.createElement(r.a.Fragment,null,t)})),m=a(10),d=a.n(m),p=a(20),f=a(17),E=a(22),h=a(23),g=a(24),b=a(205),v=a(194),y=a(198),N=a(200),w=a(199),O=a(45),C=a(173),j=a(201),x=a(101),I=a.n(x),A=a(100),T=a.n(A),D=a(53),k=a.n(D),S=k.a.create({baseURL:"/"});S.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e}));var _=S,L=(a(158),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(E.a)(this,Object(h.a)(t).call(this,e))).follow=function(){_.get("/follow",{params:{id:a.props.data.id,intent:!a.state.checked}}).then((function(e){var t=a.state,n=t.checked,r=t.followersCount,c=n?r-1:r+1;a.setState({checked:!n,followersCount:c})}))},a.insertSlide=function(e){return r.a.createElement(O.a.Item,{key:e},r.a.createElement("img",{className:"cardImage",src:e,alt:"https://vollrath.com/ClientCss/images/VollrathImages/No_Image_Available.jpg"}),r.a.createElement(O.a.Caption,null,r.a.createElement("h3",null,a.props.data.destination)))},a.formatDate=function(e){var t=e.split("-");return"".concat(t[1],"/").concat(t[0],"/").concat(t[2])},a.state={followersCount:e.data.followers,checked:e.data.checked},a}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data.images.split(","),a=this.state.checked,n=this.props.data,c=n.description,l=n.departure,o=n.returning,i=n.destination,s=n.price;return r.a.createElement(v.a,{className:"cardContainer"},r.a.createElement(y.a,null,r.a.createElement(O.a,null,t.map((function(t){return e.insertSlide(t)}))),r.a.createElement(w.a,null,r.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},i),r.a.createElement(C.a,{className:"textArea",variant:"body2",color:"textSecondary",component:"p"},c))),r.a.createElement(N.a,null,r.a.createElement("span",null),r.a.createElement(j.a,{control:r.a.createElement(b.a,{onClick:function(){e.follow()},icon:r.a.createElement(T.a,null),checkedIcon:r.a.createElement(I.a,null),checked:a}),label:this.state.followersCount}),r.a.createElement("div",{className:"dateBoxUser"},r.a.createElement("span",{className:"dateText"},this.formatDate(l),"-",this.formatDate(o)),r.a.createElement("p",{className:"priceText"},s,"$"))))}}]),t}(r.a.Component)),F=a(14),M=a(104),G=a.n(M),R=a(105),H=a.n(R),B=a(202),P=(a(160),a(78)),U=a(59),V=a(46),z=a(13),$=a(33);function J(e){var t=Object(n.useState)(e),a=Object(F.a)(t,2),r=a[0],c=a[1];return[r,function(e){var t=e.target,a=t.name,n=t.value;c(Object($.a)({},r,Object(z.a)({},a,n)))}]}var W=a(57),X=a(21),Y=a(203),q=(a(161),{GET_INITIAL_DATA:"GET_INITIAL_DATA",GET_SORTED_DATA:"GET_SORTED_DATA",IS_ADMIN:"IS_ADMIN",IS_CONNECTED:"IS_CONNECTED"}),K=function(){var e,t,a,n;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d.a.awrap(_.get("/GetData"));case 3:return e=r.sent,t=e.data,a=t.table,n=t.myFollows,e=a.map((function(e){return e.checked=n.includes(e.id),e})),r.abrupt("return",e);case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),null,null,[[0,9]])},Q=function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(_.post("/admin/delete",e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},Z=function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(_.post("/admin/update",e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},ee=function(){return function(e){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(K());case 2:t=a.sent,e({type:q.GET_SORTED_DATA,payload:t});case 4:case"end":return a.stop()}}))}},te=function(e){return function(t){return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t({type:q.IS_CONNECTED,payload:e});case 1:case"end":return a.stop()}}))}};var ae=Object(s.b)(null,(function(e,t){return{updateModelCard:function(t){return e(function(e){return function(t){return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(Z(e));case 2:t(ee());case 3:case"end":return a.stop()}}))}}(t))}}}))((function(e){var t=e.modeldata,a=t.description,c=t.price,l=t.destination,o=J({id:t.id,description:a,price:c}),i=Object(F.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(new Date),d=Object(F.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)((new Date).getTime()+864e5),h=Object(F.a)(E,2),g=h[0],b=h[1],v=function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")};return r.a.createElement(U.a,{size:"x2","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:e.show,onHide:e.onHide},r.a.createElement(U.a.Header,{closeButton:!0},r.a.createElement(U.a.Title,{id:"contained-modal-title-vcenter"},"Edit ",l," trip")),r.a.createElement(U.a.Body,null,r.a.createElement(V.a,null,r.a.createElement(V.a.Group,{className:"modalInput",controlId:"exampleForm.ControlInput2"},r.a.createElement(V.a.Label,null,"Price"),r.a.createElement(V.a.Control,{name:"price",type:"text",defaultValue:c,onChange:u})),r.a.createElement(X.a,{utils:W.a},r.a.createElement(Y.a,{className:"modalInput",label:"Departing",value:p,onChange:function(e){return f(e)},minDate:new Date,format:"dd/MM/yyyy"})),r.a.createElement(X.a,{utils:W.a},r.a.createElement(Y.a,{className:"modalInput",label:"Returning",value:g,onChange:function(e){return b(e)},minDate:p.getTime()+864e5,format:"dd/MM/yyyy",name:"returning"})),r.a.createElement(V.a.Group,{className:"modalInput",controlId:"exampleForm.ControlTextarea1"},r.a.createElement(V.a.Label,null,"Description"),r.a.createElement(V.a.Control,{as:"textarea",rows:"3",name:"description",defaultValue:a,onChange:u})))),r.a.createElement(U.a.Footer,null,r.a.createElement(P.a,{onClick:function(){e.updateModelCard(function(e){if(e.departure=v(p),e.returning=v(g),!(e.departure>=e.returning||isNaN(e.price)))return e;console.error("Insert valid parameters")}(s)),e.onHide()}},"Save"),r.a.createElement(P.a,{onClick:e.onHide},"Cancel")))})),ne=Object(s.b)(null,(function(e,t){return{deleteCard:function(t){e(function(e){return function(t){return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(Q(e));case 2:t(ee());case 3:case"end":return a.stop()}}))}}(t))}}}))((function(e){var t=e.data.images.split(","),a=e.data,n=a.description,c=a.departure,l=a.returning,o=a.destination,i=a.price,s=a.id,u=r.a.useState(!1),m=Object(F.a)(u,2),d=m[0],p=m[1],f=function(e){var t=e.split("-");return"".concat(t[1],"/").concat(t[0],"/").concat(t[2])};return r.a.createElement(v.a,{className:"cardContainer"},r.a.createElement(y.a,null,r.a.createElement(O.a,null,t.map((function(e,t){return function(e,t){return r.a.createElement(O.a.Item,{key:"".concat(e).concat(t)},r.a.createElement("img",{className:"cardImage",src:e,alt:"https://vollrath.com/ClientCss/images/VollrathImages/No_Image_Available.jpg"}),r.a.createElement(O.a.Caption,null,r.a.createElement("h3",null,o)))}(e,t)}))),r.a.createElement(w.a,null,r.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},o),r.a.createElement(C.a,{className:"textArea",variant:"body2",color:"textSecondary",component:"p"},n))),r.a.createElement(N.a,null,r.a.createElement(B.a,{onClick:function(){return p(!0)},"aria-label":"edit",size:"small"},r.a.createElement(G.a,null)),r.a.createElement(B.a,{"aria-label":"delete",size:"small",onClick:function(){e.deleteCard({destination:o,id:s})}},r.a.createElement(H.a,null)),r.a.createElement("div",{className:"dateBoxAdmin"},r.a.createElement("span",{className:"dateText"},f(c),"-",f(l)),r.a.createElement("p",{className:"priceText"},i,"$"))),r.a.createElement(ae,{modeldata:e.data,show:d,onHide:function(){return p(!1)}}))})),re=function(e){function t(){return Object(p.a)(this,t),Object(E.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data;return n.createElement("div",{className:"cardsContainer"},t.map((function(t){return n.createElement(e.props.childComponent,{key:t.id,data:t})})))}}]),t}(n.Component),ce=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(E.a)(this,Object(h.a)(t).call(this,e))).state={data:e.data},a}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.getData();case 1:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props.data,t=e.data,a=e.isAdmin;return r.a.createElement("div",null,t&&r.a.createElement(re,{childComponent:a?ne:L,data:t}))}}]),t}(r.a.Component),le=Object(s.b)((function(e,t){return{data:e}}),(function(e,t){return{getData:function(){e(ee())}}}))(ce),oe=(a(164),function(e){var t=J({image1:"",image2:"",image3:""}),a=Object(F.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(new Date),i=Object(F.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)((new Date).getTime()+864e5),p=Object(F.a)(m,2),f=p[0],E=p[1],h=function(){var t,a,n,r,l,o;return d.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(c.departure=g(s),c.returning=g(f),t=c.returning,a=c.departure,n=c.price,r=c.description,l=c.destination,!(a>=t||isNaN(n))&&r&&l){i.next=7;break}alert("insert valid parameters"),i.next=12;break;case 7:return i.next=9,d.a.awrap(_.post("/admin/addtrip",Object($.a)({},c)));case 9:o=i.sent,o.data,e.history.push("/");case 12:case"end":return i.stop()}}))},g=function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")};return r.a.createElement("div",null,r.a.createElement("h3",{className:"addTripHeader"},"Add Trip"),r.a.createElement("form",{className:"addTripForm"},r.a.createElement("div",{className:"addFormLeft"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Destination"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Destination",name:"destination",onChange:l})),r.a.createElement(X.a,{utils:W.a},r.a.createElement(Y.a,{label:"Departing",value:s,onChange:function(e){return u(e)},minDate:new Date,format:"dd/MM/yyyy"})),r.a.createElement(X.a,{utils:W.a},r.a.createElement(Y.a,{label:"Returning",value:f,onChange:function(e){return E(e)},minDate:s.getTime()+864e5,format:"dd/MM/yyyy",name:"returning"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("br",null),r.a.createElement("textarea",{rows:7,cols:40,className:"form-control",placeholder:"Description",name:"description",onChange:l}))),r.a.createElement("div",{className:"addFormRight"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Price"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Price",name:"price",onChange:l})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"First Image Link"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"First Image",name:"image1",onChange:l})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Second Image Link"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Second Image",name:"image2",onChange:l})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Third Image Link"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Third Image",name:"image3",onChange:l})),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:h},"Save"))))}),ie=(a(165),"/register");a(166);var se=Object(s.b)((function(e,t){return{isAdmin:e.isAdmin}}),(function(e,t){return{setIsAdmin:function(t){e(function(e){return function(t){return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t({type:q.IS_ADMIN,payload:e});case 1:case"end":return a.stop()}}))}}(t))},setIsConnected:function(t){e(te(t))}}}))((function(e){var t=J({email:"",password:null}),a=Object(F.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){null===c.password&&!1!==e.isAdmin&&e.setIsAdmin(!1)})),r.a.createElement("form",null,r.a.createElement("h3",null,"Sign In"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email address"),r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Enter email",name:"email",onChange:l})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Enter password",name:"password",onChange:l})),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:function(){var t,a,n,r,l,o;return d.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,d.a.awrap(k.a.post("/login",Object($.a)({},c)));case 2:t=i.sent,a=t.data,n=a.token,r=a.redirect,l=a.isAdmin,o=a.message,r&&n?(localStorage.setItem("token",n),localStorage.setItem("IsAdmin",l),e.setIsAdmin(l),e.setIsConnected(!0),e.history.push("/")):alert(o);case 6:case"end":return i.stop()}}))}},"Log in"))})),ue=a(106),me=a.n(ue),de=function(e){function t(e){var a;Object(p.a)(this,t),a=Object(E.a)(this,Object(h.a)(t).call(this,e));var n=e.data.sort((function(e,t){return e.followers<t.followers?1:t.followers<e.followers?-1:0})).slice(0,10),r=n.map((function(e){return e.followers})),c=n.map((function(e){return e.destination})),l={chart:{width:380,type:"pie"},labels:["Team A","Team B","Team C","Team D","Team E","Team G"],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]};return l.labels=c,a.state={data:e,series:r,options:l},a}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.createElement("div",{id:"chart"},n.createElement(me.a,{options:this.state.options,series:this.state.series,type:"pie",width:620}))}}]),t}(n.Component),pe=Object(s.b)((function(e,t){return{data:e.data}}),null)(de),fe=function(e){return function(t){var a=Object(n.useState)("loading"),c=Object(F.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){!function(){var e,t;d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(_.get("/admin/verify"));case 2:e=a.sent,t=e.data.status,o(t);case 5:case"end":return a.stop()}}))}()}),[]),"loading"===l?r.a.createElement("div",{className:"loader"}):l?r.a.createElement(e,t):r.a.createElement(i.a,{to:"/"})}};var Ee=Object(s.b)(null,(function(e,t){return{setIsConnected:function(t){e(te(t))}}}))((function(e){return localStorage.clear(),Object(n.useEffect)((function(){e.setIsConnected(!1)})),r.a.createElement(i.a,{to:"/Login"})})),he=[{class:"fa fa-sign-out fa-2x",exact:!0,title:"Logout",path:"/Logout",component:function(){return r.a.createElement(Ee,null)}},{class:"fa fa-sign-in fa-2x",exact:!0,title:"Login",path:"/Login",component:se},{class:"fa fa-user-plus fa-2x",exact:!0,title:"Register",path:"/Register",component:function(e){var t=J({firstName:"",lastName:"",email:"",password:""}),a=Object(F.a)(t,2),n=a[0],c=a[1];return r.a.createElement("form",null,r.a.createElement("h3",null,"Sign Up"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"First name"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"First name",name:"firstName",onChange:c})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Last name"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Last name",name:"lastName",onChange:c})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email address"),r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Enter email",name:"email",onChange:c})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",placeholder:"Enter password",onChange:c})),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:function(){var t,a,r,c;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,d.a.awrap(k.a.post(ie,n));case 2:t=l.sent,a=t.data,r=a.message,c=a.redirect,alert(r),c&&e.history.push("/Login");case 6:case"end":return l.stop()}}))}},"Sign Up"),r.a.createElement("p",{className:"forgot-password text-right"},"Already registered? ",r.a.createElement("a",{href:"/Login"},"Sign in!")))}},{exact:!0,title:"Home",path:"/",component:function(e){var t,a=(t=le,function(e){var a=Object(n.useState)("loading"),c=Object(F.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){!function(){var e,t;d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(_.get("/verify"));case 2:e=a.sent,t=e.data.status,o(t);case 5:case"end":return a.stop()}}))}()}),[]),"loading"===l?r.a.createElement("div",{className:"loader"}):l?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/Login"})});return r.a.createElement(a,e)}},{class:"fa fa-plus fa-2x",exact:!0,title:"Add Trip",path:"/AddTrip",adminPermission:!0,component:function(e){var t=fe(oe);return r.a.createElement(t,e)}},{class:"fa fa-bar-chart fa-2x",exact:!0,title:"Graph",path:"/Graph",adminPermission:!0,component:function(e){var t=fe(pe);return r.a.createElement(t,e)}}];a(168),a(169);var ge=Object(s.b)((function(e,t){return{isAdmin:e.isAdmin,isConnected:e.isConnected}}),null)((function(e){var t=he;return t=t.filter((function(e){return"Home"!==e.title})),t=e.isConnected?t.filter((function(e){return"Login"!==e.title})):t.filter((function(e){return"Logout"!==e.title})),e.isAdmin||(t=t.filter((function(e){return void 0===e.adminPermission}))),r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top"},r.a.createElement("div",{className:"container"},r.a.createElement(o.b,{className:"navbar-brand",to:"/"},r.a.createElement("i",{className:"fa fa-home fa-2x"},r.a.createElement("h5",null,"Home"))),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},t.map((function(e,t){return r.a.createElement("li",{className:"nav-item",key:t},r.a.createElement(o.b,{className:"nav-link",to:e.path},r.a.createElement("i",{className:e.class},r.a.createElement("h5",null,e.title))))})))))),r.a.createElement("div",{className:"auth-wrapper"},r.a.createElement("div",{className:"auth-inner"},r.a.createElement(i.d,null,r.a.createElement(u,{routes:he}))))))})),be=(a(170),function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ge,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=a(55),ye=a(107),Ne={data:[],isAdmin:function(){var e=localStorage.getItem("IsAdmin");return!!("false"!==e&&null!=e)}(),isConnected:!!localStorage.getItem("token")};var we=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ve.c,Oe=Object(ve.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q.GET_INITIAL_DATA:return Object($.a)({},e,{data:t.payload,myFollows:t.payload.myFollows});case q.GET_SORTED_DATA:return Object($.a)({},e,{data:t.payload.sort((function(e,t){return!e.checked&&t.checked?1:e.checked&&!t.checked?-1:0})),myFollows:t.payload.myFollows});case q.IS_ADMIN:return Object($.a)({},e,{isAdmin:t.payload});case q.IS_CONNECTED:return Object($.a)({},e,{isConnected:t.payload});default:return e}}),we(Object(ve.a)(ye.a)));l.a.render(r.a.createElement(s.a,{store:Oe},r.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[128,1,2]]]);
//# sourceMappingURL=main.585ad3dd.chunk.js.map